(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f390f928"],{"4a49":function(t,e,o){"use strict";o.d(e,"a",(function(){return a})),o.d(e,"c",(function(){return n})),o.d(e,"b",(function(){return i}));var r=o("b775");function a(t){return Object(r["a"])({url:"/biz/customer/customerAddOrUpdate",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/biz/customer/"+t,method:"delete"})}function i(t){return Object(r["a"])({url:"/biz/customer/getCustomerExport",method:"post",responseType:"blob",data:t})}},"818c":function(t,e,o){"use strict";o.d(e,"a",(function(){return a})),o.d(e,"b",(function(){return n}));var r=o("b775");function a(t){return Object(r["a"])({url:"/biz/customer/contactAddOrUpdate",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/biz/customer/contact/"+t,method:"delete"})}},a9e8:function(t,e,o){},e4f0:function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-wrapper customer-add-page-wrapper"},[o("s-title",{attrs:{title:"add"==t.title?"新增联系人":"编辑联系人"}}),t._v(" "),o("div",{staticClass:"user-add-container form-container"},[o("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[o("el-form-item",{staticClass:"form-item-full",attrs:{label:"客户名称",prop:"customerName"}},[o("el-input",{attrs:{placeholder:"请输入联系人"},on:{focus:t.tocustomer},model:{value:t.form.customerName,callback:function(e){t.$set(t.form,"customerName",e)},expression:"form.customerName"}})],1),t._v(" "),o("el-form-item",{staticClass:"form-item-full",attrs:{label:"联系人",prop:"contactName"}},[o("el-input",{attrs:{placeholder:"请输入联系人"},model:{value:t.form.contactName,callback:function(e){t.$set(t.form,"contactName",e)},expression:"form.contactName"}})],1),t._v(" "),o("el-form-item",{staticClass:"form-item-full",attrs:{label:"联系电话",prop:"contactMobile"}},[o("el-input",{attrs:{placeholder:"请输入联系方式"},model:{value:t.form.contactMobile,callback:function(e){t.$set(t.form,"contactMobile",e)},expression:"form.contactMobile"}})],1),t._v(" "),o("el-form-item",{staticClass:"form-item-full",attrs:{label:"备注",prop:"remark"}},[o("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),t._v(" "),o("el-button",{staticClass:"common-add-btn",attrs:{type:"primary"},on:{click:function(e){return t.handleAdd()}}},[t._v("保存")])],1),t._v(" "),o("el-dialog",{attrs:{top:"2vh",width:"90%",visible:t.showchoose},on:{"update:visible":function(e){t.showchoose=e}}},[o("customer",{on:{customer:t.getcustomer}})],1)],1)},a=[],n=o("818c"),i=o("b405"),s=o("61f7"),c=o("7471"),u=o("7e1e"),l=function(t,e,o){Object(s["e"])(t,e,o)},m={name:"contactAdd",components:{STitle:i["default"],customer:c["default"]},data:function(){return{title:"add",showchoose:!1,form:{customerName:null,customerId:null,contactName:null,contactMobile:null,remark:null},rules:{contactName:[{required:!0,message:"请输入联系人",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],contactMobile:[{required:!0,message:"请输入正确的11位手机号码",trigger:"blur",validator:l}],customerName:[{required:!0,message:"请选择客户名",trigger:"blur"}]}}},created:function(){this.$route.meta.title="新增联系人";var t=this.$route.query;t.id&&(this.title="update",this.$route.meta.title="编辑联系人",this.handleUpdate(t.id)),t.cid&&(this.form.customerId=t.cid,this.form.customerName=t.cname)},methods:{getcustomer:function(t){console.log(t),this.form.customerId=t[0],this.form.customerName=t[1],this.showchoose=t[2]},tocustomer:function(){this.showchoose=!0},handleAdd:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return!1;n["a"](t.form).then((function(e){"1"==e.data.code?t.$notify({title:"失败",message:"保存失败,"+e.data.msg,type:"error",duration:2e3}):"0"==e.data.code&&(t.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),t.$router.push({path:"/customer/contact/index"}))}))}))},handleUpdate:function(t){var e=u["a"].contactchange;this.form=e;var o=this.$route.query;console.log(this.$route.query),o.cid&&(this.form.customerId=o.cid,this.form.customerName=o.cname)}}},d=m,f=(o("e608"),o("0b56")),h=Object(f["a"])(d,r,a,!1,null,"70785c06",null);e["default"]=h.exports},e608:function(t,e,o){"use strict";o("a9e8")},fab6:function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var r={data:function(){return{page:{page:1,limit:10,totalPage:0}}},methods:{handleSizeChange:function(t){this.page.limit=t,this.getList()},handleCurrentChange:function(t){this.page.page=t,this.getList()},handleReset:function(){this.page={page:1,limit:10,totalPage:0},this.getList()},handleFilter:function(){this.page.page=1,this.getList()},getSerialNumber:function(t){return t+1+(this.page.page-1)*this.page.limit}}}}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5339bb94"],{"023f":function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"d",(function(){return l})),r.d(t,"c",(function(){return s}));var a=r("b775");function o(e){return Object(a["a"])({url:"/biz/device/deviceAddOrUpdate",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/biz/device/"+e,method:"delete"})}function l(){return Object(a["a"])({url:"/biz/device/getDeviceTemplate",method:"GET",responseType:"arraybuffer"})}function s(e){return Object(a["a"])({url:"/biz/device/deviceImport",method:"POST",data:e})}},"1dd0":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-wrapper device-add-page-wrapper"},[r("s-title",{attrs:{title:"add"==e.title?"新增设备":"编辑设备"}}),e._v(" "),r("div",{staticClass:"user-add-container form-container"},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"140px"}},[r("el-form-item",{staticClass:"form-item",attrs:{label:"客户姓名",prop:"customerName"}},[r("el-input",{attrs:{placeholder:"请选择客户"},on:{focus:e.tocustomer},model:{value:e.form.customerName,callback:function(t){e.$set(e.form,"customerName",t)},expression:"form.customerName"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"设备名称",prop:"deviceName"}},[r("el-input",{attrs:{placeholder:"请输入设备名称"},model:{value:e.form.deviceName,callback:function(t){e.$set(e.form,"deviceName",t)},expression:"form.deviceName"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"设备MAC码",prop:"deviceMac"}},[r("el-input",{attrs:{placeholder:"请输入设备MAC码"},model:{value:e.form.deviceMac,callback:function(t){e.$set(e.form,"deviceMac",t)},expression:"form.deviceMac"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"设备号码",prop:"deviceNo"}},[r("el-input",{attrs:{placeholder:"请输入设备号码"},model:{value:e.form.deviceNo,callback:function(t){e.$set(e.form,"deviceNo",t)},expression:"form.deviceNo"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"设备SN码",prop:"deviceSn"}},[r("el-input",{attrs:{placeholder:"请输入设备SN码"},model:{value:e.form.deviceSn,callback:function(t){e.$set(e.form,"deviceSn",t)},expression:"form.deviceSn"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"设备类型",prop:"deviceType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择设备类型"},model:{value:e.form.deviceType,callback:function(t){e.$set(e.form,"deviceType",t)},expression:"form.deviceType"}},e._l(e.deviceTypeOption,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),r("el-form-item",{staticClass:"form-item",staticStyle:{display:"block"},attrs:{label:"设备用途",prop:"deviceUses"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择设备用途"},model:{value:e.form.deviceUses,callback:function(t){e.$set(e.form,"deviceUses",t)},expression:"form.deviceUses"}},e._l(e.deviceUsesOption,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"安装人",prop:"installUser"}},[r("el-input",{attrs:{placeholder:"请输入安装人"},model:{value:e.form.installUser,callback:function(t){e.$set(e.form,"installUser",t)},expression:"form.installUser"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"安装人电话",prop:"installerPhone"}},[r("el-input",{attrs:{placeholder:"请输入安装人电话"},model:{value:e.form.installerPhone,callback:function(t){e.$set(e.form,"installerPhone",t)},expression:"form.installerPhone"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"纬度",prop:"latitude"}},[r("el-input",{attrs:{type:"number",placeholder:"请输入纬度"},model:{value:e.form.latitude,callback:function(t){e.$set(e.form,"latitude",t)},expression:"form.latitude"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"经度",prop:"longitude"}},[r("el-input",{attrs:{type:"number",placeholder:"请输入经度"},model:{value:e.form.longitude,callback:function(t){e.$set(e.form,"longitude",t)},expression:"form.longitude"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"开通时效",prop:"openBond"}},[r("el-input",{attrs:{placeholder:"请输入开通时效"},model:{value:e.form.openBond,callback:function(t){e.$set(e.form,"openBond",t)},expression:"form.openBond"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"业务开通时间"}},[r("div",{staticClass:"block"},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",format:"yyyy-MM-dd hh:mm:ss","value-format":"yyyy-MM-dd hh:mm:ss"},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1)]),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"业务终止时间"}},[r("div",{staticClass:"block"},[r("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd hh:mm:ss","value-format":"yyyy-MM-dd hh:mm:ss",placeholder:"选择日期时间"},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1)]),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"运营商",prop:"operator"}},[r("el-input",{attrs:{placeholder:"请输入运营商"},model:{value:e.form.operator,callback:function(t){e.$set(e.form,"operator",t)},expression:"form.operator"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"运营商联系人",prop:"operatorUser"}},[r("el-input",{attrs:{placeholder:"请输入运营商联系人"},model:{value:e.form.operatorUser,callback:function(t){e.$set(e.form,"operatorUser",t)},expression:"form.operatorUser"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"运行商联系电话",prop:"operatorPhone"}},[r("el-input",{attrs:{placeholder:"请输入运行商电话"},model:{value:e.form.operatorPhone,callback:function(t){e.$set(e.form,"operatorPhone",t)},expression:"form.operatorPhone"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"所属项目编号",prop:"projectCode"}},[r("el-input",{attrs:{placeholder:"请输入所属项目编号"},model:{value:e.form.projectCode,callback:function(t){e.$set(e.form,"projectCode",t)},expression:"form.projectCode"}})],1),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"所属项目",prop:"projectName"}},[r("el-input",{attrs:{placeholder:"请输入所属项目"},model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}})],1)],1),e._v(" "),r("el-button",{staticClass:"common-add-btn",attrs:{type:"primary"},on:{click:function(t){return e.handleAdd()}}},[e._v("保存")])],1),e._v(" "),r("el-dialog",{attrs:{top:"2vh",width:"90%",visible:e.showchoose},on:{"update:visible":function(t){e.showchoose=t}}},[r("customer",{on:{customer:e.getcustomer}})],1)],1)},o=[],i=(r("e186"),r("2aab")),l=r("023f"),s=r("294a"),n=r("b405"),m=r("7471"),c=r("61f7"),u=r("7e1e"),d=function(e,t,r){Object(c["e"])(e,t,r)},p={name:"deviceAdd",mixins:[s["a"]],components:{STitle:n["default"],customer:m["default"]},data:function(){return{showchoose:!1,title:"add",deviceTypeOption:[],deviceUsesOption:[],form:{startTime:null,endTime:null,customerName:null,customerId:null,deviceCode:null,deviceName:null,deviceMac:null,deviceNo:null,deviceSn:null,deviceType:null,deviceUses:null,installUser:null,installerPhone:null,latitude:null,longitude:null,openBond:null,operator:null,operatorUser:null,operatorPhone:null,projectCode:null,projectName:null},rules:{deviceCode:[{required:!0,message:"请输入设备编码",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],customerName:[{required:!0,message:"请选择客户",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],deviceName:[{required:!0,message:"请输入设备名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],deviceMac:[{required:!0,message:"请输入设备MAC码",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],deviceNo:[{required:!0,message:"请输入设备号码",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],deviceSn:[{required:!0,message:"请输入设备SN码",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],deviceType:[{required:!0,message:"请输入设备类型",trigger:"change"}],deviceUses:[{required:!0,message:"请输入设备用途",trigger:"change"}],installUser:[{required:!0,message:"请输入安装人姓名",trigger:"blur"},{min:1,max:8,message:"长度在 1 到 8 个字符",trigger:"blur"}],installerPhone:[{required:!0,message:"请输入正确的11位手机号码",trigger:"blur",validator:d}],latitude:[{required:!0,message:"请输入纬度",trigger:"blur"},{min:1,max:30,message:"长度在 1 到 10 个字符",trigger:"blur"}],longitude:[{required:!0,message:"请输入经度",trigger:"blur"},{min:1,max:30,message:"长度在 1 到 10 个字符",trigger:"blur"}],openBond:[{required:!0,message:"请输入开通时效",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],operator:[{required:!0,message:"请输入运营商",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],operatorUser:[{required:!0,message:"请输入运营商联系人",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],operatorPhone:[{required:!0,message:"请输入正确的11位手机号码",trigger:"blur",validator:d},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],projectCode:[{required:!0,message:"请输入所属项目编码",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],projectName:[{required:!0,message:"请输入所属项目",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}]}}},mounted:function(){},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(this.deviceTypeOption),this.$route.meta.title="新增设备",t=this.$route.query,t.id&&(this.title="update",this.$route.meta.title="编辑设备",this.handleUpdate(t.id));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getcustomer:function(e){console.log(e),this.form.customerId=e[0],this.form.customerName=e[1],this.showchoose=e[2]},tocustomer:function(){this.showchoose=!0},handleAdd:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;l["a"](e.form).then((function(t){"0"==t.data.code?(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.$router.push({path:"/device/index"})):e.$notify({title:"失败",message:"保存失败,"+t.data.msg,type:"error",duration:2e3})}))}))},handleUpdate:function(e){var t=u["a"].devicechange;t.latitude=t.latitude+"",t.longitude=t.longitude+"",this.form=t;var r=this.$route.query;console.log(this.$route.query),r.cid&&(this.form.customerId=r.cid,this.form.customerName=r.cname)}}},f=p,g=(r("f5d9"),r("0b56")),v=Object(g["a"])(f,a,o,!1,null,"689d298c",null);t["default"]=v.exports},"294a":function(e,t,r){"use strict";r("1bc7");var a=r("b775");function o(e){return Object(a["a"])({url:"/admin/dict/type/"+e,method:"get"})}r.d(t,"a",(function(){return i}));var i={methods:{dict:function(e,t){o(e).then((function(e){var r=JSON.parse(JSON.stringify(e.data));r.forEach((function(e){t.push({value:parseInt(e.value),label:e.label})}))}))}}}},"4a49":function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return l}));var a=r("b775");function o(e){return Object(a["a"])({url:"/biz/customer/customerAddOrUpdate",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/biz/customer/"+e,method:"delete"})}function l(e){return Object(a["a"])({url:"/biz/customer/getCustomerExport",method:"post",responseType:"blob",data:e})}},a5a7:function(e,t,r){},f5d9:function(e,t,r){"use strict";r("a5a7")},fab6:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a={data:function(){return{page:{page:1,limit:10,totalPage:0}}},methods:{handleSizeChange:function(e){this.page.limit=e,this.getList()},handleCurrentChange:function(e){this.page.page=e,this.getList()},handleReset:function(){this.page={page:1,limit:10,totalPage:0},this.getList()},handleFilter:function(){this.page.page=1,this.getList()},getSerialNumber:function(e){return e+1+(this.page.page-1)*this.page.limit}}}}}]);